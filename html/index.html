<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>10조 자기소개</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <link rel="stylesheet" href="../css/index.css" type="text/css">
  <script src="../apiKey.js"></script>
  <script type="module">
    // Firebase SDK 라이브러리 가져오기
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
    import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
    import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

    // Firebase 구성 정보 설정
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyDOY4CzOpoS-NdlwR7R5e1W-uecDQ0WaV0",
      authDomain: "jeongwaja-4920a.firebaseapp.com",
      projectId: "jeongwaja-4920a",
      storageBucket: "jeongwaja-4920a.firebasestorage.app",
      messagingSenderId: "197592185000",
      appId: "1:197592185000:web:1a7d18d31bbc7bf1d8aa9d",
      measurementId: "G-FBPBL2KLMJ"
    };

    // Firebase 인스턴스 초기화
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    $('#saveBtn').click(async function (event) {
      event.preventDefault(); // 기본 동작 방지
      let username = $('#username').val();
      let comment = $('#comment').val();

      if (username && comment) {
        try {
          let doc = {
            'username': username,
            'comment': comment
          };
          await addDoc(collection(db, "guestbook"), doc);

          alert('저장 완료!');

          window.location.reload(); // 페이지 새로고침
        } catch (error) {
          console.error("Error adding document: ", error);
          alert('저장에 실패했습니다. 다시 시도해주세요.');
        }
      } else {
        alert('모든 필드를 입력해주세요.');
      }
    });

    let data = await getDocs(collection(db, "guestbook"));
    data.forEach(doc => {
      let row = doc.data();

      let username = row['username'];
      let comment = row['comment'];

      let tempHtml = `<p><strong>${username}:</strong> ${comment}</p>`

      $('.comment-list').append(tempHtml);
    });

    $('#yongjunDetailBtn').click(async function () {
      window.location.href = "./detail/yongjun.html";
    })

    $('#hyewonDetailBtn').click(async function () {
      window.location.href = "./detail/hyewon.html";
    })

    $('#yunheeDetailBtn').click(async function () {
      window.location.href = "./detail/yunhee.html";
    })

    $('#seonghoDetailBtn').click(async function () {
      window.location.href = "./detail/seongho.html";
    })

    $('#sanghyeonDetailBtn').click(async function () {
      window.location.href = "./detail/sanghyeon.html";
    })
  </script>
</head>

<body>
  <!-- 헤더 -->
  <div id="header" class="header"></div>

  <!-- 메인 -->
  <div class="container">
    <div class="content-section">
      <!-- 버튼 -->
      <div class="buttons">
        <button id="homeButton" class="btn btn-primary">메인</button>
        <button id="teamButton" class="btn btn-secondary">팀원 소개</button>
        <button id="guestbookButton" class="btn btn-secondary">방명록</button>
      </div>

      <!-- 메인 섹션 -->
      <div class="mainSection" id="mainSection">
        <div class="project-intro">
          <img src="https://i.pinimg.com/474x/4a/60/a9/4a60a95017b5e5f42082ac8221cae5b4.jpg" alt="">
          <h2>프로젝트 소개</h2>
          <p>팀 전체의 소개와 각각의 팀원의 개성이 담긴 자기소개 웹 페이지 입니다.</p>
        </div>

        <div class="row">
          <div class="col-md-6">
            <div class="box role-box">
              <h3>역할 분담</h3>
              <p>&#128102; 박용준(팀장) : 방명록 DB 구성, UI 컨트롤 연결
                <br>&#128103; 한윤희 : 메인페이지 HTML
                <br>&#128103; 민혜원 : 메인페이지 CSS
                <br>&#128102; 박성호 : 기능 시연 영상
                <br>&#128102; 박상현 : 기능 시연 영상
                <br>✔ 공통 작업 : 각 개인 페이지 제작 및 디자인
                <br>✔ 발표자 :
              </p>
              <hr>
              <h3>사용 기술</h3>
              <p>✔ Tool : GitHub, Visual Studio code<br>
                ✔ HTML:5, CSS, JavaScript, BootStrap<br>
                ✔ Firestore Database<br>
                ✔ 촬영도구<br>
                ✔ 발표자료</p>
            </div>
          </div>
          <div class="col-md-6">
            <div class="box team-box">
              <h3>팀 규칙</h3>
              <p>1. 시간 약속을 철저히 지키겠습니다.<br>
                2. 소통을 중요시하며 자리 비움이나 문제가 생기면 빠르게 공유하겠습니다.<br>
                3. 실수나 문제가 있어도 남 탓하지말고 문제를 해결해나가는데 집중하겠습니다.<br>
                4. 대화를 할 때는 캠도 켜고 화면공유도 잘 하겠습니다. <br>
                5. 파이팅하겠습니다!</p>
              <hr>
              <h3>팀 목표</h3>
              <p>1. 매일 일정 소화하기<br>
                2. 부끄러워도 물어보기<br>
                3. 이번 프로젝트 포트폴리오로 사용하기<br>
                4. TIL 남은날까지 맨날 쓰기 📝<br>
                5. 1일 1TIL, 1알고리즘</p>
            </div>
          </div>
        </div>
      </div>

      <!-- 팀원 소개 -->
      <div class="team-intro" id="teamIntro">
        <!-- 박용준 -->
        <div class="profile-box">
          <div class="profile left">
            <img src="../images/yongjun/yongjun-index.jpg" alt="Member Photo">
            <div class="profile-info">
              <h4>박용준</h4>
              <p> 2001.09.21<br>🌱 서울 은평구<br>💬 "여러분 모두 버그없는 하루 보내세요!"</p>
              <button id="yongjunDetailBtn" class="btn btn-sm btn-primary">More</button>
            </div>
          </div>
        </div>

        <!-- 민혜원 -->
        <div class="profile-box">
          <div class="profile right">
            <img src="../images/hyewon/won_main.jpg" alt="Member Photo">
            <div class="profile-info">
              <h4>민혜원</h4>
              <p>2000.07.17<br>🌱 경기 화성시<br>💬 "나는 문어"</p>
              <button id="hyewonDetailBtn" class="btn btn-sm btn-primary">More</button>
            </div>
          </div>
        </div>

        <!-- 윤희님 -->
        <div class="profile-box">
          <div class="profile left">
            <img src="../images/yunhee/YunHee.jpg" alt="Member Photo">
            <div class="profile-info">
              <h4>한윤희</h4>
              <p>23세<br>🌱 원주시<br>💬 "화이팅!"</p>
              <button id="yunheeDetailBtn" class="btn btn-sm btn-primary">More</button>
            </div>
          </div>
        </div>

        <!-- 성호님 -->
        <div class="profile-box">
          <div class="profile right">
            <img src="../images/seongho/seongho.jpg" alt="Member Photo">
            <div class="profile-info">
              <h4>박성호</h4>
              <p>1997.03.05<br>🌱 경상북도 경산시<br>💬 "다들 화이팅합시다!"</p>
              <button id="seonghoDetailBtn" class="btn btn-sm btn-primary">More</button>
            </div>
          </div>
        </div>

        <!-- 상현님 -->
        <div class="profile-box">
          <div class="profile left">
            <img src="https://via.placeholder.com/80" alt="Member Photo">
            <div class="profile-info">
              <h5>박상현</h5>
              <p>나이 : <br>🌱 거주지 : <br>💬 한마디 :</p>
              <button id="sanghyeonDetailBtn" class="btn btn-sm btn-primary">More</button>
            </div>
          </div>
        </div>
      </div>

      <!-- 방명록 -->
      <div class="guestbook" id="guestbook">
        <form>
          <input id="username" type="text" class="form-control" placeholder="username" autocomplete="off">
          <textarea id="comment" class="form-control" rows="1" placeholder="comment" autocomplete="off"></textarea>
          <button id="saveBtn" class="btn btn-sm">Send</button>
        </form>
        <div class="comment-list">

        </div>
      </div>
    </div>
  </div>

  <!-- footer -->
  <div id="footer" class="footer"></div>
</body>
<script>
  const homeButton = document.getElementById("homeButton");
  const teamButton = document.getElementById("teamButton");
  const guestbookButton = document.getElementById("guestbookButton");

  const mainSection = document.getElementById("mainSection");
  const teamIntro = document.getElementById("teamIntro");
  const guestbook = document.getElementById("guestbook");

  homeButton.addEventListener("click", () => {
    mainSection.style.display = "block";
    teamIntro.style.display = "none";
    guestbook.style.display = "none";
  });

  teamButton.addEventListener("click", () => {
    mainSection.style.display = "none";
    teamIntro.style.display = "block";
    guestbook.style.display = "none";
  });

  guestbookButton.addEventListener("click", () => {
    mainSection.style.display = "none";
    teamIntro.style.display = "none";
    guestbook.style.display = "block";
  });

  $(function () {
    $('#header').load("./header.html");
    $('#footer').load("./footer.html");
  });
</script>

</html>